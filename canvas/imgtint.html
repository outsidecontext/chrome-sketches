<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
    <head>
        <title>HTML5 Canvas Test</title>
        <script type="text/javascript">
var x; //drawing context
var width;
var height;
var fg;
var buffer

window.onload = function() {
    var drawingCanvas = document.getElementById('myDrawing');
    // Check the element is in the DOM and the browser supports canvas
    if(drawingCanvas && drawingCanvas.getContext) {
        // Initaliase a 2-dimensional drawing context
        context = drawingCanvas.getContext('2d');
        width = context.canvas.width;
        height = context.canvas.height;

        //grey box grid for transparency testing
        // context.fillStyle = '#666666';
        // context.fillRect(0,0,width,height);
        // context.fillStyle = '#AAAAAA';
        // var i,j;
        // for (i=0; i<100; i++){
        //     for (j=0; j<100; j++){
        //         if ((i+j)%2==0){
        //             context.fillRect(20*i,20*j,20,20);
        //         }
        //     }
        // }

        var imageObj = new Image();
        imageObj.onload = function() {
            context.drawImage(imageObj, 69, 50);

            // a globalCompositeOperation won't allow us to leave the BG white... 
            // context.globalCompositeOperation = 'destination-atop';
            // context.fillStyle = '#ff0000';
            // context.fillRect(0,0,width,height);

            // do it manually
            // get the pixel data for current content
            var buffer = context.getImageData(0, 0, width, height),
            data = buffer.data,
            len = data.length,
            i = 0,
            c = {r:255, g: 20, b: 0};
            // update each pixel using the tint colour
            for(; i < len; i += 4) {
                var shade = data[i]/255;
                //if (data[i+3] > 0) {
                    data[i] = c.r * shade;
                    data[i + 1] = c.g * shade;
                    data[i + 2] = c.b * shade;
                //}
            }
            /// put new data e.g. the tinted image back into the canvas
            context.putImageData(buffer, 0, 0);
        };
        //imageObj.src = 'box.png';
        imageObj.src = 'sphere.png';

        var imageObj2 = new Image();
        imageObj2.onload = function() {
            context.drawImage(imageObj2, 69, 50);
        }
        imageObj2.src = 'shark.png';
    
    }
}
        </script>
    </head>
    </body>
        <canvas id="myDrawing" width="1000" height="800">
            <p>Your browser doesn't support canvas.</p>
        </canvas>
    </body>
</html>